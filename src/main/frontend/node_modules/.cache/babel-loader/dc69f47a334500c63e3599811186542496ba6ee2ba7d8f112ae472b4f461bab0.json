{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SaveTourInfo=_ref=>{let{startDate,endDate,departure,destination,selectedItems,selectedTrains={selectedTrains}}=_ref;const[isModalOpen,setIsModalOpen]=useState(false);const[saveTitle,setSaveTitle]=useState('');const handleSave=title=>{setSaveTitle(title);setIsModalOpen(false);sendSaveRequest(title);};const sendSaveRequest=title=>{const userId=sessionStorage.getItem('loginId');const userNo=sessionStorage.getItem('userNo');/* 값이 잘 받아지는지 console로 확인 */if(userId){console.log('Logged in user ID:',userId);console.log('Logged in userNo:',userNo);}else{console.log('No user ID found in session storage.');}console.log('Selected Items:',selectedItems);console.log('Start Date:',startDate);console.log('End Date:',endDate);console.log('Departure:',departure);console.log('Destination:',destination);console.log('selectedTrains:',selectedTrains);console.log('title:',saveTitle);/* 컨트롤러로 api값 전송 */fetch('/api/savePlan',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userNo:userNo,startDate:startDate,endDate:endDate,departure:departure,destination:destination,selectedItems:selectedItems,selectedTrains:selectedTrains,saveTitle:title})}).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.text();}).then(text=>{if(text){return JSON.parse(text);// 텍스트가 비어있지 않으면 JSON으로 파싱\n}return{};// 텍스트가 비어있으면 빈 객체 반환\n}).then(data=>{console.log(data);// 서버에서 받은 응답을 콘솔에 출력\n}).catch(error=>{console.error('Error sending selected items to backend:',error);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsModalOpen(true),children:\"\\uC800\\uC7A5\"}),/*#__PURE__*/_jsx(Modal,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),onSave:handleSave})]});};// 모달 컴포넌트\nconst Modal=_ref2=>{let{isOpen,onClose,onSave}=_ref2;const[title,setTitle]=useState('');if(!isOpen){return null;}const handleSave=()=>{onSave(title);alert('저장이 완료되었습니다!');};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-save\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content-save\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h4\",{className:\"modal-title\",children:\"\\uD50C\\uB79C \\uC81C\\uBAA9\\uC744 \\uC801\\uC5B4\\uC8FC\\uC138\\uC694\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value)})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\uC800\\uC7A5\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,children:\"\\uB2EB\\uAE30\"})]})});};export default SaveTourInfo;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","SaveTourInfo","_ref","startDate","endDate","departure","destination","selectedItems","selectedTrains","isModalOpen","setIsModalOpen","saveTitle","setSaveTitle","handleSave","title","sendSaveRequest","userId","sessionStorage","getItem","userNo","console","log","fetch","method","headers","body","JSON","stringify","then","response","ok","Error","text","parse","data","catch","error","children","onClick","Modal","isOpen","onClose","onSave","_ref2","setTitle","alert","className","type","value","onChange","e","target"],"sources":["C:/Users/윤기섭/Documents/GitHub/YourPlanner/src/main/frontend/src/components/js/SaveTourInfo.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst SaveTourInfo = ({ startDate, endDate, departure, destination, selectedItems, selectedTrains={selectedTrains} }) => {\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [saveTitle, setSaveTitle] = useState('');\r\n\r\n    const handleSave = (title) => {\r\n        setSaveTitle(title);\r\n        setIsModalOpen(false);\r\n        sendSaveRequest(title);\r\n    };\r\n\r\n    const sendSaveRequest = (title) => {\r\n        const userId = sessionStorage.getItem('loginId');\r\n        const userNo = sessionStorage.getItem(('userNo'));\r\n\r\n        /* 값이 잘 받아지는지 console로 확인 */\r\n        if (userId) {\r\n            console.log('Logged in user ID:', userId);\r\n            console.log('Logged in userNo:', userNo);\r\n        } else {\r\n            console.log('No user ID found in session storage.');\r\n        }\r\n        console.log('Selected Items:', selectedItems);\r\n        console.log('Start Date:', startDate);\r\n        console.log('End Date:', endDate);\r\n        console.log('Departure:', departure);\r\n        console.log('Destination:', destination);\r\n        console.log('selectedTrains:', selectedTrains);\r\n        console.log('title:', saveTitle);\r\n\r\n        /* 컨트롤러로 api값 전송 */\r\n        fetch('/api/savePlan', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                userNo: userNo,\r\n                startDate: startDate,\r\n                endDate: endDate,\r\n                departure: departure,\r\n                destination: destination,\r\n                selectedItems:  selectedItems,\r\n                selectedTrains: selectedTrains,\r\n                saveTitle: title\r\n            })\r\n        })\r\n            .then(response => {\r\n                if (!response.ok) {\r\n                    throw new Error('Network response was not ok');\r\n                }\r\n                return response.text();\r\n            })\r\n            .then(text => {\r\n                if (text) {\r\n                    return JSON.parse(text); // 텍스트가 비어있지 않으면 JSON으로 파싱\r\n                }\r\n                return {}; // 텍스트가 비어있으면 빈 객체 반환\r\n            })\r\n            .then(data => {\r\n                console.log(data); // 서버에서 받은 응답을 콘솔에 출력\r\n            })\r\n            .catch(error => {\r\n                console.error('Error sending selected items to backend:', error);\r\n            });\r\n    };\r\n\r\n    return(\r\n        <div>\r\n            <button onClick={() => setIsModalOpen(true)}>저장</button>\r\n            <Modal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                onSave={handleSave}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n// 모달 컴포넌트\r\nconst Modal = ({isOpen, onClose, onSave}) => {\r\n    const [title, setTitle] = useState('');\r\n\r\n    if (!isOpen) {\r\n        return null;\r\n    }\r\n\r\n    const handleSave = () => {\r\n        onSave(title);\r\n        alert('저장이 완료되었습니다!');\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal-save\">\r\n            <div className=\"modal-content-save\">\r\n                <div>\r\n                    <h4 className=\"modal-title\">플랜 제목을 적어주세요</h4>\r\n                </div>\r\n                <div>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={title}\r\n                        onChange={(e) => setTitle(e.target.value)}\r\n                    />\r\n                </div>\r\n\r\n                <button onClick={handleSave}>저장</button>\r\n                <button onClick={onClose}>닫기</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default SaveTourInfo;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}