{"ast":null,"code":"import React,{useState,useEffect}from'react';import RecommendedPlaces from'./RecommendedPlaces';import'../css/ListComponent.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ListComponent=_ref=>{let{areaCode,sigunguCode}=_ref;const[data,setData]=useState([]);const[page,setPage]=useState(1);const[loading,setLoading]=useState(false);const fetchInitialData=async()=>{try{setLoading(true);const response=await fetch(\"http://apis.data.go.kr/B551011/KorService1/areaBasedList1?serviceKey=5uJ1mFn4tOfEwReTW3dupjd4w2n5kEHO5nciT%2BDVGAVWTl90sysBKbMTIlIxLW5lCPo1VmpZ%2FXggxU84GhG81g%3D%3D&pageNo=1&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&arrange=A&areaCode=\".concat(areaCode,\"&sigunguCode=\").concat(sigunguCode));if(!response.ok){throw new Error('Network response was not ok');}const responseData=await response.text();const parser=new DOMParser();const xmlData=parser.parseFromString(responseData,'text/xml');const items=xmlData.getElementsByTagName('item');const extractedData=Array.from(items).map(item=>{var _item$getElementsByTa;return{title:item.getElementsByTagName('title')[0].textContent,addr1:item.getElementsByTagName('addr1')[0].textContent,contenttypeid:item.getElementsByTagName('contenttypeid')[0].textContent,firstimage2:((_item$getElementsByTa=item.getElementsByTagName('firstimage2')[0])===null||_item$getElementsByTa===void 0?void 0:_item$getElementsByTa.textContent)||''};});setData(extractedData);}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};const fetchMoreData=async pageNumber=>{try{setLoading(true);const response=await fetch(\"http://apis.data.go.kr/B551011/KorService1/areaBasedList1?serviceKey=5uJ1mFn4tOfEwReTW3dupjd4w2n5kEHO5nciT%2BDVGAVWTl90sysBKbMTIlIxLW5lCPo1VmpZ%2FXggxU84GhG81g%3D%3D&pageNo=\".concat(pageNumber,\"&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&arrange=A&areaCode=\").concat(areaCode,\"&sigunguCode=\").concat(sigunguCode));if(!response.ok){throw new Error('Network response was not ok');}const responseData=await response.text();const parser=new DOMParser();const xmlData=parser.parseFromString(responseData,'text/xml');const items=xmlData.getElementsByTagName('item');const extractedData=Array.from(items).map(item=>{var _item$getElementsByTa2;return{title:item.getElementsByTagName('title')[0].textContent,addr1:item.getElementsByTagName('addr1')[0].textContent,contenttypeid:item.getElementsByTagName('contenttypeid')[0].textContent,firstimage2:((_item$getElementsByTa2=item.getElementsByTagName('firstimage2')[0])===null||_item$getElementsByTa2===void 0?void 0:_item$getElementsByTa2.textContent)||''};});setData(prevData=>[...prevData,...extractedData]);}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};useEffect(()=>{fetchInitialData();},[areaCode,sigunguCode]);useEffect(()=>{if(page>1){fetchMoreData(page);}},[page]);const loadMore=()=>{setPage(prevPage=>prevPage+1);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uCD94\\uCC9C \\uBA85\\uC18C\"}),/*#__PURE__*/_jsx(RecommendedPlaces,{data:data}),/*#__PURE__*/_jsx(\"div\",{className:\"load-more-container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:loadMore,disabled:loading,children:loading?'로딩 중...':'더보기'})})]});};export default ListComponent;","map":{"version":3,"names":["React","useState","useEffect","RecommendedPlaces","jsx","_jsx","jsxs","_jsxs","ListComponent","_ref","areaCode","sigunguCode","data","setData","page","setPage","loading","setLoading","fetchInitialData","response","fetch","concat","ok","Error","responseData","text","parser","DOMParser","xmlData","parseFromString","items","getElementsByTagName","extractedData","Array","from","map","item","_item$getElementsByTa","title","textContent","addr1","contenttypeid","firstimage2","error","console","fetchMoreData","pageNumber","_item$getElementsByTa2","prevData","loadMore","prevPage","children","className","onClick","disabled"],"sources":["C:/Users/admin/Documents/GitHub/YourPlanner/src/main/frontend/src/components/js/ListComponent.jsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport RecommendedPlaces from './RecommendedPlaces';\r\nimport '../css/ListComponent.css';\r\n\r\nconst ListComponent = ({ areaCode, sigunguCode}) => {\r\n  const [data, setData] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchInitialData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`http://apis.data.go.kr/B551011/KorService1/areaBasedList1?serviceKey=5uJ1mFn4tOfEwReTW3dupjd4w2n5kEHO5nciT%2BDVGAVWTl90sysBKbMTIlIxLW5lCPo1VmpZ%2FXggxU84GhG81g%3D%3D&pageNo=1&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&arrange=A&areaCode=${areaCode}&sigunguCode=${sigunguCode}`);\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      const responseData = await response.text();\r\n      const parser = new DOMParser();\r\n      const xmlData = parser.parseFromString(responseData, 'text/xml');\r\n      const items = xmlData.getElementsByTagName('item');\r\n      const extractedData = Array.from(items).map(item => ({\r\n        title: item.getElementsByTagName('title')[0].textContent,\r\n        addr1: item.getElementsByTagName('addr1')[0].textContent,\r\n        contenttypeid: item.getElementsByTagName('contenttypeid')[0].textContent,\r\n        firstimage2: item.getElementsByTagName('firstimage2')[0]?.textContent || ''\r\n      }));\r\n      setData(extractedData);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchMoreData = async (pageNumber) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`http://apis.data.go.kr/B551011/KorService1/areaBasedList1?serviceKey=5uJ1mFn4tOfEwReTW3dupjd4w2n5kEHO5nciT%2BDVGAVWTl90sysBKbMTIlIxLW5lCPo1VmpZ%2FXggxU84GhG81g%3D%3D&pageNo=${pageNumber}&numOfRows=10&MobileApp=AppTest&MobileOS=ETC&arrange=A&areaCode=${areaCode}&sigunguCode=${sigunguCode}`);\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n      const responseData = await response.text();\r\n      const parser = new DOMParser();\r\n      const xmlData = parser.parseFromString(responseData, 'text/xml');\r\n      const items = xmlData.getElementsByTagName('item');\r\n      const extractedData = Array.from(items).map(item => ({\r\n        title: item.getElementsByTagName('title')[0].textContent,\r\n        addr1: item.getElementsByTagName('addr1')[0].textContent,\r\n        contenttypeid: item.getElementsByTagName('contenttypeid')[0].textContent,\r\n        firstimage2: item.getElementsByTagName('firstimage2')[0]?.textContent || ''\r\n      }));\r\n      setData(prevData => [...prevData, ...extractedData]);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchInitialData();\r\n  }, [areaCode, sigunguCode]);\r\n\r\n  useEffect(() => {\r\n    if (page > 1) {\r\n      fetchMoreData(page);\r\n    }\r\n  }, [page]);\r\n\r\n  const loadMore = () => {\r\n    setPage(prevPage => prevPage + 1);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>추천 명소</h2>\r\n      <RecommendedPlaces data={data}/>\r\n      <div className=\"load-more-container\">\r\n        <button onClick={loadMore} disabled={loading}>\r\n          {loading ? '로딩 중...' : '더보기'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}