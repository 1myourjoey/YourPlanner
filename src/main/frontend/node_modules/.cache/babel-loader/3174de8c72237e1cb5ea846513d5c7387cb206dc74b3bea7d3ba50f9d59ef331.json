{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'../css/modal.css';import chatIcon from'../img/chat.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[isModalOpen,setIsModalOpen]=useState(false);const fetchReply=async message=>{try{const{data}=await axios.post('/chat',{message});return data.response;}catch(error){console.error('Error fetching reply:',error);return'Failed to get response from server';}};const handleSend=async()=>{const reply=await fetchReply(input);setMessages(prevMessages=>[...prevMessages,{text:input,sender:'user'},{text:reply,sender:'bot'}]);setInput('');};const handleInputChange=e=>{setInput(e.target.value);};const openModal=()=>{setIsModalOpen(true);};const closeModal=()=>{setIsModalOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:chatIcon,alt:\"Chat Icon\",onClick:openModal}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"close\",onClick:closeModal,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-box\",children:messages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.sender),children:/*#__PURE__*/_jsx(\"p\",{className:\"message-text\",children:message.text})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Type your message...\",value:input,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"button\",onClick:handleSend,children:\"Send\"})})]})]})})]});}export default Chat;","map":{"version":3,"names":["React","useState","axios","chatIcon","jsx","_jsx","jsxs","_jsxs","Chat","messages","setMessages","input","setInput","isModalOpen","setIsModalOpen","fetchReply","message","data","post","response","error","console","handleSend","reply","prevMessages","text","sender","handleInputChange","e","target","value","openModal","closeModal","children","src","alt","onClick","className","map","index","concat","type","placeholder","onChange"],"sources":["C:/Users/윤기섭/Documents/GitHub/YourPlanner/src/main/frontend/src/components/js/Chat.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport '../css/modal.css';\r\nimport chatIcon from '../img/chat.png';\r\n\r\nfunction Chat() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  const fetchReply = async (message) => {\r\n    try {\r\n      const { data } = await axios.post('/chat', { message });\r\n      return data.response;\r\n    } catch (error) {\r\n      console.error('Error fetching reply:', error);\r\n      return 'Failed to get response from server';\r\n    }\r\n  };\r\n\r\n  const handleSend = async () => {\r\n    const reply = await fetchReply(input);\r\n    setMessages(prevMessages => [...prevMessages, { text: input, sender: 'user' }, { text: reply, sender: 'bot' }]);\r\n    setInput('');\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setInput(e.target.value);\r\n  };\r\n\r\n  const openModal = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <img src={chatIcon} alt=\"Chat Icon\" onClick={openModal} />\r\n\r\n      {/* 모달 */}\r\n      {isModalOpen && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <span className=\"close\" onClick={closeModal}>&times;</span>\r\n\r\n            {/* 대화 표시 */}\r\n            <div className=\"chat-box\">\r\n              {messages.map((message, index) => (\r\n                <div key={index} className={`message ${message.sender}`}>\r\n                  <p className=\"message-text\">{message.text}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* 입력 필드 */}\r\n            <div className=\"input-group mb-3\">\r\n              <input type=\"text\" className=\"form-control\" placeholder=\"Type your message...\" value={input} onChange={handleInputChange} />\r\n              <div className=\"input-group-append\">\r\n                <button className=\"btn btn-primary\" type=\"button\" onClick={handleSend}>Send</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}